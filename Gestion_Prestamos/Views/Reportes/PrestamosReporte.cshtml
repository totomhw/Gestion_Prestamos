@model IEnumerable<Gestion_Prestamos.Models.Prestamo>

<h1>Reporte de Préstamos</h1>

<form method="get" asp-controller="Reportes" asp-action="Index">
    <div class="form-group">
        <label for="usuario">Usuario</label>
        <select id="usuario" name="usuario" class="form-control">
            <option value="">Todos</option>
            @foreach (var usuario in ViewBag.Usuarios)
            {
                <option value="@usuario.Text">@usuario.Text</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="categoria">Categoría</label>
        <select id="categoria" name="categoria" class="form-control">
            <option value="">Todas</option>
            @foreach (var categoria in ViewBag.Categorias)
            {
                <option value="@categoria.Text">@categoria.Text</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="fechaInicio">Fecha Inicio</label>
        <input type="date" id="fechaInicio" name="fechaInicio" class="form-control" />
    </div>

    <div class="form-group">
        <label for="fechaFin">Fecha Fin</label>
        <input type="date" id="fechaFin" name="fechaFin" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Filtrar</button>
    <button type="submit" formaction="/Reportes/ExportarPDF" class="btn btn-danger">Exportar a PDF</button>
</form>

<table class="table">
    <thead>
        <tr>
            <th>Elemento</th>
            <th>Usuario</th>
            <th>Unidades Prestadas</th>
            <th>Fecha de Préstamo</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var prestamo in Model)
        {
            <tr>
                <td>@prestamo.Elemento.Nombre</td>
                <td>@prestamo.Usuario.Nombre</td>
                <td>@prestamo.UnidadesPrestadas</td>
                <td>@prestamo.FechaPrestamo.ToString("yyyy-MM-dd")</td>
            </tr>
        }
    </tbody>
</table>
